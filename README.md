# Banking System API

## მოკლე აღწერა

პროექტი წარმოადგენს საბანკო სისტემისთვის API-ის, რომლის გამოყენებითაც მომხმარებლებს აქვთ შესაძლებლობა გადარიცხონ თანხები საკუთარ ან სხვის ანგარიშებზე და ისარგებლონ ATM-ით.

## Getting Started

### ინსტალაცია

```bash
# Clone the repository
git clone https://github.com/TarielTopuria/BankingSystemProject.git

# Change directory to the project folder
cd your-project

# Install dependencies
npm install

```

### მნიშნველოვანი ინფორმაცია
სისტემაში გამოყენებულია JWT Identity, რომელიც ჩეკავს უსაფრთხოების Key-ის Issuer-სა და Audience-ს, რომელიც დასეტილია appsettings.json-ში.
ამიტომ პირველ რიგში საჭიროა მისი შეცვლა და შესაბამისი პორტების მითითება.

## სისტემის აღწერა

სისტემაში დამატებულია ### ორი ტიპის აუთენთიფიკაცია:
1. OnlineBankLogin – ვალიდური Username (Email) და Password-ის მითითების შემდეგ აგენერირებს ტოკენს, ტოკენით ავტორიზაციის გავლის შემდეგ მომხმარებელს შესაბამისი როლის მიხედვით ენიჭება უფლებები ExchangeRates, NetBank, Operator და Report მეთოდებზე.
2. ATMLogin  - ვალიდური CardNumber-ისა და PIN-ის მითითების შემდეგ აგენერირებს ტოკენს, ტოკენით ავტორიზაციის გავლის შემდეგ მომხმარებელს ენიჭება ATM-ში შემავალ უფლებებზე წვდომა და შეუძლია მოითხოვოს ბარათზე არსებული ბალანსი, შეცვალოს პინი ან გაანაღდოს თანხა.

სისტემის კონფიგურირებისას გამოყენებულია JWT Identity. ტოკენებში ისეტება მომხმარებლის შესახებ ქლეიმები, რომლებიც შემდგომში გამოიყენება სხვადასხვა ოპერაციების შესასრულებლად. ტოკენის ვალიდურობის დროდ განსაზღვრულია 30 წუთი.

### როლები
სისტემაში არსებობს რამდენიმე როლი: 
1. Admin - უფლებამოსილია განაახლოს ვალუტის კურსები, დაამატოს მომხმარებლები/ანგარიშები/ბარათები, დააგენერიროს რეპორტები;
2. Manager - უფლებამოსილია განაახლოს ვალუტის კურსები, დააგენერიროს რეპორტები;
3. Operator - უფლებამოსილია დაამატოს მომხმარებლები / ანგარიშები / ბარათები;
4. Client - უფლებამოსილია მოითხოვოს ინფორმაცია ანგარიშებისა და ბარათების შესახებ, შეასრულოს ტრანზაქციები.

დამატებით არსებობს “CardHolder” როლი, რომელიც “Client”-ს ენიჭება ATMLogin მეთოდით აუთენთიფიკაციის გავლის შემდეგ; 

### კონტროლერები
სისტემაში გამოყოფილია რამდენიმე კონტროლერი:
1. Auth - უზრუნველყოფს აუთენთიფიკაციას ორი ალტერნატიული მეთოდით:
  a. OnlineBankLogin;
  b. ATMLogin;
2. ExchangeRates - უზრუნველყოფს ბაზაში შენახული ვალუტის კურსების განახლებას ეროვნული ბანკის კურსების შესაბამისად, ასევე ახდენს კალკულაციას;
3. Operator - ონლაინ ბანკის სერვისები, რომლებიც ოპერატორს შესაძლებლობას აძლევს დაამატოს მომხმარებელი, შექმნას საბანკო ანგარიში და დაამატოს ბარათები (მომხმარებლის შესახებ ინფორმაცია დასეტილია ტოკენში და მეთოდში გამოიყენება ქლაიმებით);
4. NetBank - ონლაინ ბანკის სერვისები, რომლებიც კლიენტს შესაძლებლობას აძლევს მიიღოს ინფორმაცია საკუთარ ანგარიშებზე, ბარათებზე და განახორციელოს ტრანზაქციები (მომხმარებლის შესახებ ინფორმაცია დასეტილია ტოკენში და მეთოდში გამოიყენება ქლაიმებით);
5. ATM – “CardHolder” უფლების მქონე მომხმარებლებს შესაძლებლობას აძლევს გაეცნონ ბარათზე არსებულ ბალანსს, შეცვალონ პინ-კოდი ან გაანაღდონ თანხა (მომხმარებლის შესახებ ინფორმაცია დასეტილია ტოკენში და მეთოდში გამოიყენება ქლაიმებით);
6. Report – “Manager”-სა და “Admin”-ს აძლევს შესაძლებლობას დააგენერირონ სხვადასხვა ტიპის რეპორტები, საწყისი და საბოლოო თარიღის მითითებით. სისტემაში დამატებულია 13 ტიპის რეპორტი:

### დამატებითი სერვისი
დამატებით სისტემაში გაშვებულია BackgroundService (ExchangeRateUpdateService), რომელიც განსაზღვრულ დროს (ამჟამად განსაზღვრულია 17:00 საათი) ავტომატურად იძახებს GetExchangeRates მეთოდს და აახლებს მონაცემებს ვალუტების შესახებ.

## სისტემის მუშაობის ლოგკა
### ტრანზაქციები
OnlineBankLogin მეთოდით აუთენთიფიკაციის გავლის შემდეგ, “Client” როლის მქონე მომხმარებელს შეუძლია ორი ტიპის ტრანზაქციის შესრულება:
1. საკუთარ ანგარიშებს შორის თანხის გადარიცხვა, რომლის დროსაც გადარიცხვის საკომისიო იქნება 0%;
2. ბანკის სხვა ანგარიშზე გადარიცხვა, რომლის დროსაც გადარიცხვის საკომისიო იქნება 1% + 0.5 (ლარი/დოლარი/ევრო);

თანხის გადარიცხვისას, აგრეთვე, გათვალისწინებულია ანგარიშების ვალუტების კურსები. თუ ერთი ანგარიშის ვალუტა განსხვავდება მეორე ანგარიშის ვალუტისგან, ხდება თანხის კონვერტაცია წინასწარ განსაზღვრული კურსის მიხედვით.

### ATM ოპერაციები
ATMLogin მეთოდით აუთენთიფიკაციის გავლის შემდეგ, “CardHolder” როლის მქონე მომხმარებელს შეუძლია შემდეგი ოპერაციების ჩატარება:
1. ბალანსის ნახვა;
2. პინ კოდის შეცვლა;
3. თანხის გამოტანა GEL, USD ან EUR ვალუტაში;

ATM-დან თანხის გამოტანის საკომისიოდ განსაზღვრულია 2% და 24 საათის განმავლობაში შესაძლებელია მაქსიმუმ 10,000 ლარის გამოტანა.

### რეპორტები
OnlineBankLogin მეთოდით აუთენთიფიკაციის გავლის შემდეგ, “Admin” და “Manager” როლის მქონე მომხმარებელს შეუძლიათ შემდეგი ტიპის რეპორტების ნახვა:
1. დროის კონკრეტულ შუალედში დარეგისტრირებული მომხმარებლების ოდენობა;
2. დროის კონკრეტულ შუალედში განხორციელებული ტრანზაქციების რაოდენობა (რამდენი ტრანზაქცია განხორციელდა);
3. დროის კონკრეტულ შუალედში განხორციელებული ტრანზაქციების რაოდენობა დღეების მიხედვით (ჩარტი, რამდენი ტრანზაქცია განხორციელდა თითოეულ დღეს;
4. დროის კონკრეტულ შუალედში განხორციელებული ATM თანხის გადახდების ოპერაციის რაოდენობა;
5. დროის კონკრეტულ შუალედში განხორციელებული ATM თანხის გადახდების ოპერაციის რაოდენობა დღეების მიხედვით;
6. დროის კონკრეტულ შუალედში განხორციელებული ტრანზაქციების თანხობრივი ოდენობა;
7. დროის კონკრეტულ შუალედში ATM-დან თანხის განაღდების თანხობრივი ოდენობა;
8. დროის კონკრეტულ შუალედში განხორციელებული ტრანზაქციების საშუალო თანხობრივი ოდენობა;
9. დროის კონკრეტულ შუალედში ATM-დან თანხის განაღდების საშუალო თანხობრივი ოდენობა;
10. დროის კონკრეტულ შუალედში განხორციელებული ტრანზაქციებიდან საკომისიოს სახით მიღებული შემოსავლის თანხობრივი ოდენობა;
11. დროის კონკრეტულ შუალედში ATM-დან თანხის განაღდების საკომისიოს  სახით მიღებული შემოსავლის თანხობრივი ოდენობა;
12. დროის კონკრეტულ შუალედში განხორციელებული ტრანზაქციებიდან საკომისიოს სახით საშუალოდ მიღებული შემოსავლის თანხობრივი ოდენობა;
13. დროის კონკრეტულ შუალედში ATM-დან თანხის განაღდების საკომისიოს  სახით საშუალოდ მიღებული შემოსავლის თანხობრივი ოდენობა;

### დამატებითი ინფორმაცია
სვაგერში გამოდგმულია ავტორიზაციის ჩანართი. ასევე, სისტემაში დამატებულია ლოგირება, რომელიც დღეების მიხედვით ლოგებს ინახავს როგორც ფაილში, ასევე ბაზაში.

